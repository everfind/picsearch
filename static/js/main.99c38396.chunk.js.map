{"version":3,"sources":["components/search/index.tsx","lib/vendors/pexels.ts","lib/vendors/pixabay.ts","lib/picture.ts","components/picture-list/index.tsx","pages/curated/index.tsx","components/loading/index.tsx","pages/search/index.tsx","utils/index.ts","App.tsx","reportWebVitals.ts","index.tsx"],"names":["Search","className","query","onKeyDown","useCallback","event","key","keyCode","searchStr","target","value","window","location","search","encodeURIComponent","cls","defaultValue","placeholder","instance","axios","create","headers","Authorization","mapPhotoToPicture","photo","id","width","height","pageUrl","url","imageUrl","src","large","params","imageWidth","imageHeight","pageURL","largeImageURL","useDefaultPictures","useState","pictures","setPictures","useEffect","get","page","per_page","then","resp","data","photos","map","catch","e","useSearchPictures","keyword","setPage","Map","size","setSize","pexels","set","q","hits","searchPixabayPicture","pixabay","fetchMore","useMemo","Array","from","values","PictureList","pictureList","pic","rate","style","flexGrow","flexShrink","background","maxHeight","maxWidth","href","rel","paddingBottom","data-src","alt","CuratedPictures","defaultPictures","Loading","React","forwardRef","props","ref","margin","xmlns","viewBox","preserveAspectRatio","cx","cy","r","fill","attributeName","repeatCount","dur","calcMode","keyTimes","keySplines","begin","SearchPictures","loadMoreRef","useRef","onScroll","current","element","viewWidth","innerWidth","document","documentElement","clientWidth","viewHeight","innerHeight","clientHeight","getBoundingClientRect","top","right","bottom","left","isInViewPort","addEventListener","removeEventListener","visible","invisible","length","App","qs","parse","substring","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.99c38396.chunk.js","sourcesContent":["import React from 'react';\nimport cls from 'clsx';\nimport { useCallback } from 'react';\n\nexport const Search = function ({ className, query }: { className?: string; query?: string }) {\n  const onKeyDown = useCallback((event: React.KeyboardEvent<HTMLInputElement>) => {\n    if (event.key === 'Enter' || event.keyCode === 13) {\n      const searchStr = (event.target as any).value;\n      window.location.search = `q=${encodeURIComponent(searchStr)}`;\n    }\n  }, []);\n  return (\n    <div className={cls('w-2/4', 'h-14', 'rounded-lg', 'bg-white', 'overflow-hidden', className)}>\n      <input defaultValue={query} className={cls('w-full', 'h-full', 'p-3', 'outline-none', 'text-lg')} placeholder='搜索免费图片' onKeyDown={onKeyDown} />\n    </div>\n  );\n};\n","import axios from 'axios';\nimport { Picture } from '../../types';\n\nconst instance = axios.create({\n  headers: {\n    Authorization: '563492ad6f91700001000001ee73ec26350b4a91aa701684cd9cf496',\n  },\n});\n\nfunction mapPhotoToPicture(photo: Photo): Picture {\n  return { id: photo.id, width: photo.width, height: photo.height, pageUrl: photo.url, imageUrl: photo.src.large };\n}\n\nexport function getCurated(): Promise<Picture[]> {\n  return instance\n    .get<SearchReturn>('https://api.pexels.com/v1/curated', {\n      params: {\n        page: 1,\n        per_page: 80,\n      },\n    })\n    .then((resp) => {\n      return resp.data.photos.map(mapPhotoToPicture);\n    })\n    .catch((e) => {\n      return [];\n    });\n}\n\nexport function searchPicture(params: SearchParams): Promise<Picture[]> {\n  return instance\n    .get<SearchReturn>('https://api.pexels.com/v1/search/', {\n      params: {\n        ...params,\n        query: encodeURIComponent(params.query),\n      },\n    })\n    .then((resp) => {\n      return resp.data.photos.map(mapPhotoToPicture);\n    })\n    .catch((e) => {\n      return [];\n    });\n}\n\n// https://www.pexels.com/zh-cn/api/documentation/\nexport interface SearchParams {\n  query: string;\n  page: number;\n  per_page: number;\n  orientation?: 'landscape' | 'portrait' | 'square';\n  size?: 'large' | 'medium' | 'small';\n  color?: 'red' | 'orange' | 'yellow' | 'green' | 'turquoise' | 'blue' | 'violet' | 'pink' | 'brown' | 'black' | 'gray' | 'white';\n}\n\nexport interface Photo {\n  id: string;\n  width: number;\n  height: number;\n  url: string;\n  src: {\n    original: string;\n    large: string;\n    large2x: string;\n    medium: string;\n    small: string;\n    portrait: string;\n    landscape: string;\n    tiny: string;\n  };\n}\n\nexport interface SearchReturn {\n  total_results: number;\n  page: number;\n  per_page: number;\n  prev_page: number;\n  next_page: number;\n  photos: Photo[];\n}\n","import axios from 'axios';\nimport { Picture } from '../../types';\n\nconst instance = axios.create({\n  params: {\n    key: '24009231-e8e4fd260a26521d059640a40',\n  },\n});\n\n// https://pixabay.com/api/docs/\nexport interface SearchParams {\n  q: string;\n  page: number;\n  per_page: number;\n  orientation?: 'horizontal' | 'vertical';\n  image_type?: 'all' | 'photo' | 'illustration' | 'vector';\n  category?:\n    | 'backgrounds'\n    | 'fashion'\n    | 'nature'\n    | 'science'\n    | 'education'\n    | 'feelings'\n    | 'health'\n    | 'people'\n    | 'religion'\n    | 'places'\n    | 'animals'\n    | 'industry'\n    | 'computer'\n    | 'food'\n    | 'sports'\n    | 'transportation'\n    | 'travel'\n    | 'buildings'\n    | 'business'\n    | 'music';\n  min_width?: number;\n  min_height?: number;\n  colors?: 'grayscale' | 'transparent' | 'red' | 'orange' | 'yellow' | 'green' | 'turquoise' | 'blue' | 'lilac' | 'pink' | 'white' | 'gray' | 'black' | 'brown';\n  safesearch?: 'true' | 'false';\n  order?: 'popular' | 'latest';\n}\n\nexport interface Photo {\n  id: string;\n  pageURL: string;\n  previewURL: string;\n  webformatURL: string;\n  largeImageURL: string;\n  imageHeight: number;\n  imageWidth: number;\n}\n\nexport interface SearchReturn {\n  total: number;\n  totalHits: number;\n  hits: Photo[];\n}\n\nfunction mapPhotoToPicture(photo: Photo): Picture {\n  return { id: photo.id, width: photo.imageWidth, height: photo.imageHeight, pageUrl: photo.pageURL, imageUrl: photo.largeImageURL };\n}\n\nexport function searchPicture(params: SearchParams): Promise<Picture[]> {\n  return instance\n    .get<SearchReturn>('https://pixabay.com/api/', {\n      params: {\n        ...params,\n        query: encodeURIComponent(params.q),\n      },\n    })\n    .then((resp) => {\n      return resp.data.hits.map(mapPhotoToPicture);\n    })\n    .catch((e) => []);\n}\n","import { useCallback, useEffect, useMemo, useState } from 'react';\nimport { Picture } from '../types';\nimport { searchPicture as searchPexelsPicture, getCurated } from './vendors/pexels';\nimport { searchPicture as searchPixabayPicture } from './vendors/pixabay';\n\nexport function useDefaultPictures(): Picture[] {\n  const [pictures, setPictures] = useState<Picture[]>([]);\n  useEffect(() => {\n    getCurated().then((data) => setPictures(data));\n  }, []);\n  return pictures;\n}\n\nconst perPage = 40;\n\nexport function useSearchPictures(keyword: string): [Picture[], () => void] {\n  const [page, setPage] = useState(1);\n  const [pictures] = useState<Map<string, Picture>>(new Map());\n  const [size, setSize] = useState(pictures.size);\n  useEffect(() => {\n    searchPexelsPicture({ page, per_page: perPage, query: keyword }).then((pexels) => {\n      pexels.map((photo) => pictures.set(photo.imageUrl, photo));\n      setSize(pictures.size);\n    });\n    searchPixabayPicture({ page, per_page: perPage, q: keyword }).then((pixabay) => {\n      pixabay.map((photo) => pictures.set(photo.imageUrl, photo));\n      setSize(pictures.size);\n    });\n  }, [page, keyword, pictures, setSize]);\n  const fetchMore = useCallback(() => {\n    setPage(page + 1);\n  }, [page, setPage]);\n  const data = useMemo<Picture[]>(() => {\n    if (!size) {\n      return [];\n    }\n    return Array.from(pictures.values());\n  }, [pictures, size]);\n  return [data, fetchMore];\n}\n","import React from 'react';\nimport cls from 'clsx';\nimport { Picture } from '../../types';\nimport './index.css';\n\nexport function PictureList({ pictureList }: { pictureList: Picture[] }) {\n  return (\n    <ul className={cls('flex', 'flex-row', 'flex-wrap')}>\n      {pictureList.map((pic) => {\n        const rate = pic.width / pic.height;\n        const baseHeight = 250;\n        return (\n          <a\n            key={pic.id}\n            className={cls('relative', 'm-1', 'block')}\n            style={{\n              width: `${rate * baseHeight}px`,\n              flexGrow: rate * baseHeight,\n              flexShrink: rate * baseHeight,\n              background: '#f6f5fa',\n              maxHeight: '50vh',\n              maxWidth: `calc(${rate} * 50vh)`,\n            }}\n            href={pic.pageUrl}\n            target='_blank'\n            rel='noreferrer'\n          >\n            <i className={cls('block')} style={{ paddingBottom: `${(1 / rate) * 100}%` }}></i>\n            <img className={cls('absolute', 'w-full', 'h-full', 'top-0', 'align-bottom', 'border-0', 'lazyload')} data-src={pic.imageUrl} alt='' />\n          </a>\n        );\n      })}\n    </ul>\n  );\n}\n","import { useDefaultPictures } from '../../lib/picture';\nimport { PictureList } from '../../components/picture-list';\n\nexport function CuratedPictures() {\n  const defaultPictures = useDefaultPictures();\n  return <PictureList pictureList={defaultPictures} />;\n}\n","import React from 'react';\nimport cls from 'clsx';\n\nexport const Loading = React.forwardRef<HTMLDivElement>((props, ref) => {\n  return (\n    <div ref={ref} className={cls('block', 'h-10')} style={{ margin: '10px auto' }}>\n      <svg\n        xmlns='http://www.w3.org/2000/svg'\n        className={cls('bg-transparent', 'block', 'my-0', 'mx-auto')}\n        width='40px'\n        height='40px'\n        viewBox='0 0 100 100'\n        preserveAspectRatio='xMidYMid'\n      >\n        <circle cx='84' cy='50' r='10' fill='#e15b64'>\n          <animate attributeName='r' repeatCount='indefinite' dur='0.25s' calcMode='spline' keyTimes='0;1' values='10;0' keySplines='0 0.5 0.5 1' begin='0s'></animate>\n          <animate\n            attributeName='fill'\n            repeatCount='indefinite'\n            dur='1s'\n            calcMode='discrete'\n            keyTimes='0;0.25;0.5;0.75;1'\n            values='#e15b64;#abbd81;#f8b26a;#f47e60;#e15b64'\n            begin='0s'\n          ></animate>\n        </circle>\n        <circle cx='16' cy='50' r='10' fill='#e15b64'>\n          <animate\n            attributeName='r'\n            repeatCount='indefinite'\n            dur='1s'\n            calcMode='spline'\n            keyTimes='0;0.25;0.5;0.75;1'\n            values='0;0;10;10;10'\n            keySplines='0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1'\n            begin='0s'\n          ></animate>\n          <animate\n            attributeName='cx'\n            repeatCount='indefinite'\n            dur='1s'\n            calcMode='spline'\n            keyTimes='0;0.25;0.5;0.75;1'\n            values='16;16;16;50;84'\n            keySplines='0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1'\n            begin='0s'\n          ></animate>\n        </circle>\n        <circle cx='50' cy='50' r='10' fill='#f47e60'>\n          <animate\n            attributeName='r'\n            repeatCount='indefinite'\n            dur='1s'\n            calcMode='spline'\n            keyTimes='0;0.25;0.5;0.75;1'\n            values='0;0;10;10;10'\n            keySplines='0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1'\n            begin='-0.25s'\n          ></animate>\n          <animate\n            attributeName='cx'\n            repeatCount='indefinite'\n            dur='1s'\n            calcMode='spline'\n            keyTimes='0;0.25;0.5;0.75;1'\n            values='16;16;16;50;84'\n            keySplines='0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1'\n            begin='-0.25s'\n          ></animate>\n        </circle>\n        <circle cx='84' cy='50' r='10' fill='#f8b26a'>\n          <animate\n            attributeName='r'\n            repeatCount='indefinite'\n            dur='1s'\n            calcMode='spline'\n            keyTimes='0;0.25;0.5;0.75;1'\n            values='0;0;10;10;10'\n            keySplines='0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1'\n            begin='-0.5s'\n          ></animate>\n          <animate\n            attributeName='cx'\n            repeatCount='indefinite'\n            dur='1s'\n            calcMode='spline'\n            keyTimes='0;0.25;0.5;0.75;1'\n            values='16;16;16;50;84'\n            keySplines='0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1'\n            begin='-0.5s'\n          ></animate>\n        </circle>\n        <circle cx='16' cy='50' r='10' fill='#abbd81'>\n          <animate\n            attributeName='r'\n            repeatCount='indefinite'\n            dur='1s'\n            calcMode='spline'\n            keyTimes='0;0.25;0.5;0.75;1'\n            values='0;0;10;10;10'\n            keySplines='0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1'\n            begin='-0.75s'\n          ></animate>\n          <animate\n            attributeName='cx'\n            repeatCount='indefinite'\n            dur='1s'\n            calcMode='spline'\n            keyTimes='0;0.25;0.5;0.75;1'\n            values='16;16;16;50;84'\n            keySplines='0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1'\n            begin='-0.75s'\n          ></animate>\n        </circle>\n      </svg>\n    </div>\n  );\n});\n","import React from 'react';\nimport cls from 'clsx';\nimport { PictureList } from '../../components/picture-list';\nimport { Loading } from '../../components/loading';\nimport { useSearchPictures } from '../../lib/picture';\nimport { useEffect } from 'react';\nimport { isInViewPort } from '../../utils';\nimport { useRef } from 'react';\nimport { useCallback } from 'react';\n\nexport function SearchPictures({ keyword }: { keyword: string }) {\n  const [pictures, fetchMore] = useSearchPictures(keyword);\n  const loadMoreRef = useRef<HTMLDivElement>(null);\n  const onScroll = useCallback(() => {\n    if (loadMoreRef.current && isInViewPort(loadMoreRef.current)) {\n      fetchMore();\n    }\n  }, [loadMoreRef, fetchMore]);\n  useEffect(() => {\n    window.addEventListener('scroll', onScroll);\n    return () => {\n      window.removeEventListener('scroll', onScroll);\n    };\n  }, [onScroll]);\n  return (\n    <>\n      <p className={cls('m-2', 'text-gray-600', { visible: !!keyword, invisible: !keyword })}>您查找的关于“{keyword}”的图片：</p>\n      <PictureList pictureList={pictures} />\n      {!!pictures.length && <Loading ref={loadMoreRef} />}\n    </>\n  );\n}\n","export function isInViewPort(element: HTMLElement) {\n  const viewWidth = window.innerWidth || document.documentElement.clientWidth;\n  const viewHeight = window.innerHeight || document.documentElement.clientHeight;\n  const { top, right, bottom, left } = element.getBoundingClientRect();\n\n  return top >= 0 && left >= 0 && right <= viewWidth && bottom <= viewHeight;\n}\n","import React from 'react';\nimport cls from 'clsx';\nimport qs from 'qs';\nimport { Search } from './components/search';\nimport { CuratedPictures } from './pages/curated';\nimport { SearchPictures } from './pages/search';\nimport 'lazysizes';\n\nexport default function App() {\n  const { q: keyword } = qs.parse(window.location.search.substring(1));\n\n  return (\n    <div className={cls('w-screen', 'h-screen', 'bg-gray-100')}>\n      <div className={cls('flex', 'flex-row', 'justify-center', 'p-4')}>\n        <Search query={keyword as string} />\n      </div>\n      {!keyword ? <CuratedPictures /> : <SearchPictures keyword={keyword as string} />}\n    </div>\n  );\n}\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}